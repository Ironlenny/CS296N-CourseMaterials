<!DOCTYPE html><html>  <head>    <meta http-equiv="content-type" content="text/html; charset=UTF-8">    <title>Week 10, Day 1, AJAX REST Client</title>    <style type="text/css">body {  font-family: "Arial", "Helvetica", "sans-serif";}#week10 {  background-color: #f8ff2e;}code {  display:block;  font-size: larger;  background-color: lightgoldenrodyellow;  max-height:400px;  width:75%;  overflow:scroll;}.exercise {  background-color: #c6ffe2;}</style> </head>  <body>    <header> <b>CS295N Web Development 1: ASP.NET&nbsp;&nbsp;        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; November 27, 2017<br>      </b>      <div>Brian Bird</div>      <br>      <i><b>Topic: Using AJAX to consume a REST web API<br>        </b></i></header>    <section>      <article> <br>        <b>Topics<br>        </b>        <table style="width: 807px; height: 127px;" border="1">          <tbody>            <tr>              <td>1. Intro to Razor Pages</td>              <td>6. More EF and Publishing to Azure</td>            </tr>            <tr>              <td>2. Code-behind, session state, and page layout files</td>              <td>7. Async Programming and More Azure</td>            </tr>            <tr>              <td>3. Tag Helpers, model binding, and unit testing</td>              <td id="week08">8. LINQ and Validation</td>            </tr>            <tr>              <td>4. More on session state and form input</td>              <td id="week09">9. Web API<br>              </td>            </tr>            <tr>              <td>5. Entity Framework and SQL Databases</td>              <td id="week10">10. AJAX Web API Client<br>              </td>            </tr>          </tbody>        </table>        <b><br>          <br>          Introduction</b><br>        <ul>          <li>New textbook for CS296N: <a href="https://www.apress.com/us/book/9781484231494"              target="_blank">Pro
              ASP.NET Core MVC 2</a>, by Adam Freeman<br>          </li>          <li>Review lab due dates on Moodle</li>          <ul>          </ul>        </ul>      </article>      <article>        <div><b>Term Project Due Dates</b></div>        <div>          <ul>            <li>Proposal: 11/15, Wednesday of this week</li>            <li>Beta version: 11/30, Thursday of week 10</li>            <li>In-class presentation: 12/4, Monday of finals week</li>            <li>Production version: 12/5<b>, </b>Tuesday of finals week<b><br>              </b></li>          </ul>        </div>        <div><b>Overview</b></div>        <div>          <ul>            <b>              <li><a href="#topic1">AJAX</a></li>              <li><a href="#topic2">XMLHttpRequest<br>                </a></li>              <li><a href="#topic3">Consuming a REST Service</a></li>              <li><a href="#topic4">Development Tips</a></li>            </b>          </ul>        </div>      </article>    </section>    <section>      <article id="topic1">        <p> <u><b>AJAX<br>            </b></u></p>        <ul>          <ul>            <ul>            </ul>          </ul>        </ul>        <ul>        </ul>        <ul>          <li>AJAX (Asynchronous JavaScript and XML) lets you:</li>          <ul>            <li>&nbsp;Update a web page without reloading the page</li>            <li>Request data from a server - after the page has loaded</li>            <li>Receive data from a server - after the page has loaded</li>            <li>Send data to a server - in the background</li>          </ul>        </ul>        <ul>          <li>Tutorial: <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX/Getting_Started"              target="_blank">MDN,
              AJAX Getting Started Guide</a></li>          <li>For Practice: <a href="https://www.wunderground.com/weather/api"              target="_blank">Weather
              Underground API Docs</a></li>        </ul>        <ul>          <ul>          </ul>          <ul>          </ul>        </ul>        <p></p>      </article>      <article id="topic2">        <p><u><b>XMLHttpRequest </b></u></p>        <ul>        </ul>        <span class="seoSummary" style="margin: 0px; padding: 0px; border: 0px; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">The
          XMLHttpRequest function, which is available in all modern browsers,          lets you&nbsp; retrieve data from a URL without having to do a full          page refresh. XMLHttpRequest was originally designed by Microsoft          around 1999 and later adopted by Mozilla, Apple, and Google. Since          October 2014, it has been made part of the standard. Despite its name,          XMLHttpRequest can be used to retrieve any type of data, not just XML,          and it supports protocols other than HTTP (including file and ftp).</span><span          style="color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, arial, x-locale-body, sans-serif; font-size: medium; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); display: inline !important; float: none;"></span>        <ul>          <li>Reference: <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest"              target="_blank">MDN,
              XMLHttpRequest<br>            </a></li>          <li>Guide: <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest"              target="_blank">MDN,
              Using XMLHttpRequest</a><br>          </li>          <li>Example:<br>            <code>function reqListener () {<br>              &nbsp; console.log(this.responseText);<br>              }<br>              <br>              var oReq = new XMLHttpRequest();<br>              oReq.addEventListener("load", reqListener);<br>              oReq.open("GET", "http://www.example.org/example.txt");<br>              oReq.send();</code> </li>          <ul>            <br>          </ul>        </ul>      </article>      <article id="topic4">        <p><u><b>Consuming a REST Service </b></u></p>        <ul>          <li>Tutorial: <a href="http://g-liu.com/blog/2016/07/a-strategy-for-consuming-rest-apis-in-javascript/"              target="_blank">A              strategy for consuming REST APIâ€™s in JavaScript</a></li>        </ul>      </article>      <article id="topic3">        <p><u><b>Development Tips<br>            </b></u></p>        <ul>          <li>Watch out for <u><i>cross-origin request</i> issues</u> - a            potential "gotcha"!</li>          <ul>            <li>A cross-origin request is an HTTP request to a web service or              web app that comes from some other domain than the one that hosts              the service.<a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">                Wikipedia: Cross-Origin Resource Sharing</a>. Most web hosts              will block Ajax requests (XMLHttpRequest) that come from another              domain, but most hosting platforms provide a mechanism, CORS              (Cross-Origin Resource Sharing), for selectively allowing requests              from domains that you authorize.</li>            <li>When testing your REST client against a Web API running on your              development machine, you will need to put the client web page              files into the wwwroot folder of your Web API project so that they              will be served by your development server (IIS Express, Kestrel,              etc.). Be sure to enable static files (see below).</li>            <li>When testing your REST client against a Web API running on              Azure, you can run your web client on your development machine if              you enable CORS for the Web App running on Azure. To do this:</li>            <ol>              <li>Open the <a href="https://portal.azure.com" target="_blank">Azure
                  Portal</a></li>              <li>Click on A<i>pp Service</i></li>              <li>Scroll down the list of settings until you see <i>CORS</i>                and click on it. </li>              <li>Set an <i>Allowed Origin</i>. <br>                You can set the allowed origins to * so that your Web API can be                called from any domain. (You may want to change this to be more                restrictive when you have finished testing.)<br>                <br>              </li>            </ol>          </ul>          <li><u>Enable static files</u> in your Web API project. </li>          <ul>            <li>To enable your server to serve your REST client's web page, you              need to enable static files by adding the line of code below to              the <i>Configure</i> method in <i>Startup.cs<br>              </i><code>app.UseStaticFiles();</code><br>            </li>          </ul>          <li> Check your Web API app for <u>exceptions while running on Azure</u>.</li>          <ul>            <li>To do this:</li>            <ol>              <li>&nbsp;open the <a href="https://portal.azure.com" target="_blank">Azure
                  Portal</a></li>              <li>Click on App Service</li>              <li>Scroll down the list of settings until you see Application                Insights and click on it</li>              <li>At the bottom of the page click on <i>View more in                  Application Insights</i></li>              <li>Scroll down in the new list on the left and click on<i>                  Failures</i></li>              <li>Near the top of the page, click on<i> Exceptions</i></li>            </ol>          </ul>        </ul>        <p><br>        </p>        <ul>          <ul>            <ol>            </ol>          </ul>        </ul>      </article>    </section>  </body></html>